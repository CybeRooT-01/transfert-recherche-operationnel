<div class="w-full h-[90%] p-6 flex flex-col gap-4">

  <!-- Header -->
  <div class="flex justify-between items-center">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Mon Profil</h1>
      <span class="text-gray-600 text-sm">Voici vos informations personnelles</span>
    </div>

    <!-- Icône d’édition -->
    <button (click)="openEditModal()" class="p-2 rounded-full hover:bg-gray-200">✏️</button>
  </div>

  <!-- Infos personnelles -->
  <div class="bg-white shadow-md rounded-lg p-6 flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-800">Informations personnelles</h2>
    <div class="grid grid-cols-2 gap-4">
      <div><label class="block text-sm font-medium text-gray-600">Nom complet</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.firstName }} {{ profileForm.value.lastName }}</p>
      </div>
      <div><label class="block text-sm font-medium text-gray-600">Username</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.username }}</p>
      </div>
      <div><label class="block text-sm font-medium text-gray-600">Téléphone</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.phoneNumber }}</p>
      </div>
      <div><label class="block text-sm font-medium text-gray-600">Email</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.email }}</p>
      </div>
      <div><label class="block text-sm font-medium text-gray-600">Pays</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.country }}</p>
      </div>
    </div>
  </div>

  <!-- Informations identité -->
  <div class="bg-white shadow-md rounded-lg p-6 flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-800">Informations d'identité</h2>
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-600">Numéro de pièce</label>
        <p class="text-gray-800 font-semibold">{{ profileForm.value.idNumber }}</p>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-600">Photo pièce (recto)</label>
        <div class="w-32 h-32 border border-gray-300 rounded-lg overflow-hidden">
          <img [src]="profileForm.value.rectoCni || '/assets/images/photo_piece.jpg'" alt="Recto CNI"
            class="w-full h-full object-cover" />
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-600">Photo pièce (verso)</label>
        <div class="w-32 h-32 border border-gray-300 rounded-lg overflow-hidden">
          <img [src]="profileForm.value.versoCni || '/assets/images/photo_piece.jpg'" alt="Verso CNI"
            class="w-full h-full object-cover" />
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Modal édition -->
<div *ngIf="isEditModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white rounded-xl shadow-lg w-[50%] h-[85%] p-6 flex flex-col gap-6 overflow-y-auto relative">

    <button (click)="closeModal()" class="absolute top-3 right-3 text-xl text-[#e1a91c]">X</button>

    <h3 class="text-gray-700 font-semibold text-center text-xl mb-4">Modification Profil</h3>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">

      <div class="flex gap-4">
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Prénom</label>
          <input type="text" formControlName="firstName"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Nom</label>
          <input type="text" formControlName="lastName"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
      </div>

      <div class="flex gap-4">
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Username</label>
          <input type="text" formControlName="username"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Téléphone</label>
          <input type="tel" formControlName="phoneNumber"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
      </div>

      <div class="flex gap-4">
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Email</label>
          <input type="email" formControlName="email"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
        <div class="flex flex-col w-1/2">
          <label class="text-gray-800">Pays</label>
          <input type="text" formControlName="country"
            class="rounded-lg w-full h-10 p-2 ring-1 ring-gray-200 outline-none" />
        </div>
      </div>

      <button type="submit"
        class="bg-[#e1a91c] text-white font-semibold py-2 px-4 rounded-lg mt-16 w-full hover:bg-[#c08b15] transition">
        Modifier
      </button>

    </form>
  </div>
</div>

